   <div class="tab-pane active table-responsive" id="tabla-area">
       <div class="card-body" style="display:flex;justify-content:center">
           <div class="table-respsonsive" style="width: 70%;">


               <div>
                   <div class="card   collapsed-card">
                       <div class="card-header callout callout-info">
                           <div class="card-tools">
                               <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus"></i>
                               </button>
                           </div>
                           <a data-card-widget="collapse">
                               <h5>¿Necesitas ayuda? </h5>
                           </a>
                           En esta sección encontarás toda la información sobre la funcionalidad de las plantillas
                           para los dias
                           festivos.


                       </div>

                       <div class="card-body">
                           <div class="table-respsonsive" style="width: 100%;">



                               <section class="content">
                                   <div class="row">
                                       <div class="col-12" id="accordion">


                                           <div class="card card-primary card-outline">
                                               <a class="d-block w-100 collapsed" style="color:#000000;" data-toggle="collapse" href="#collapseOne" aria-expanded="false">
                                                   <div class="card-header">
                                                       <h4 class="card-title w-100">
                                                           ¿Para que sirven las plantillas?
                                                       </h4>
                                                   </div>
                                               </a>
                                               <div id="collapseOne" class="collapse" data-parent="#accordion">
                                                   <div class="card-body">
                                                       Las plantillas son herramientas que nos permiten organizar los
                                                       días festivos que deseamos que no se utilicen al programar
                                                       solicitudes de vacaciones por parte de los empleados. Su
                                                       principal función es facilitar un control más efectivo de los
                                                       días de vacaciones disponibles y garantizar que no se tomen en
                                                       cuenta los días festivos en el proceso de planificación de las
                                                       vacaciones de los empleados.
                                                   </div>
                                               </div>
                                           </div>


                                           <div class="card card-primary card-outline">
                                               <a class="d-block w-100 collapsed" style="color:#000000;" data-toggle="collapse" href="#collapseTwo" aria-expanded="false">
                                                   <div class="card-header">
                                                       <h4 class="card-title w-100">
                                                           Activar Plantilla
                                                       </h4>
                                                   </div>
                                               </a>
                                               <div id="collapseTwo" class="collapse" data-parent="#accordion">
                                                   <div class="card-body">


                                                       Cuando activas una plantilla, las solicitudes de vacaciones que
                                                       se generen a partir de ese momento tomarán como referencia los
                                                       días que están agregados en esa plantilla.
                                                       <br> <br> Las plantillas solo pueden ser activadas cuando tengan
                                                       días agregados.
                                                       <br> <br>Puedes activar la plantilla que desees

                                                   </div>
                                               </div>
                                           </div>

                                           <div class="card card-primary card-outline">
                                               <a class="d-block w-100 collapsed" style="color:#000000;" data-toggle="collapse" href="#collapseThree" aria-expanded="false">
                                                   <div class="card-header">
                                                       <h4 class="card-title w-100">
                                                           ¿Porque no puedo agregar , editar o eliminar una fecha ?
                                                       </h4>
                                                   </div>
                                               </a>
                                               <div id="collapseThree" class="collapse" data-parent="#accordion">
                                                   <div class="card-body">
                                                       Una vez que se ha generado una solicitud de vacaciones mientras
                                                       la plantilla estaba activa, los botones de 'Agregar', 'Editar' y
                                                       'Eliminar' fechas se deshabilitarán.<br> <br>
                                                       Esto es necesario para asegurar que las solicitudes mantengan su
                                                       integridad por lo tanto la plantilla no puede ser modificada.<br>
                                                       <br>
                                                       Si necesitas hacer cambios, puedes crear una nueva plantilla con
                                                       los datos deseados y asegúrate de activarla.


                                                   </div>
                                               </div>
                                           </div>

                                           <div class="card card-primary card-outline">
                                               <a class="d-block w-100 collapsed" style="color:#000000;" data-toggle="collapse" href="#collapseFour" aria-expanded="false">
                                                   <div class="card-header">
                                                       <h4 class="card-title w-100">
                                                           Duplicar las fechas de la última plantilla creada
                                                       </h4>
                                                   </div>
                                               </a>
                                               <div id="collapseFour" class="collapse" data-parent="#accordion">
                                                   <div class="card-body">
                                                       Cuando desees crear una nueva plantilla, esta opción estará
                                                       habilitada. Esto significa que las fechas que hayas añadido en la
                                                       última plantilla que creaste se copiarán automáticamente a la
                                                       nueva plantilla que estás a punto de crear. Esto se hace para
                                                       ahorrarte tiempo y evitar que tengas que volver a añadir los
                                                       días. <br>
                                                       <br> Recuerda que puedes borrar una o varias fechas si no las
                                                       necesitas. <br>
                                                       <br>
                                                       Si prefieres comenzar desde cero, puedes desactivar esta opción
                                                       desmarcando la casilla correspondiente.

                                                   </div>
                                               </div>
                                           </div>


                                           <div class="card card-primary card-outline">
                                               <a class="d-block w-100 collapsed" style="color:#000000;" data-toggle="collapse" href="#collapseFive" aria-expanded="false">
                                                   <div class="card-header">
                                                       <h4 class="card-title w-100">
                                                           ¿Como sé sí mi plantilla se activó?
                                                       </h4>
                                                   </div>
                                               </a>
                                               <div id="collapseFive" class="collapse" data-parent="#accordion">
                                                   <div class="card-body">
                                                       Las plantillas activas se resaltarán en verde, mientras que las
                                                       inactivas se mostrarán en gris.
                                                       <br> <br>
                                                       Es importante recordar que solo puedes tener una plantilla activa
                                                       a la vez.

                                                   </div>
                                               </div>
                                           </div>


                                       </div>
                                   </div>
                                   <div class="row">
                                       <div class="col-12 mt-3 text-center">
                                           <p class="lead" style="color:#929191">
                                               Contactanos si no encontraste la respuesta corrrecta o si tienes alguna
                                               pregunta.<br>
                                           </p>
                                       </div>
                                   </div>
                               </section>




                               <!-- fin div -->
                           </div>

                           <div>
                           </div>

                       </div>

                   </div>
               </div>



               <section class="content-header">
                   <div class="row" style="justify-content:right">


                       <div class="col-sm-3" style="justify-content:right;text-align:right">
                           <button id='add_template' class="btn btn-primary" data-toggle="modal">
                               Agregar Plantilla </button>
                       </div>

                   </div>
               </section>

               <div>

                   <div class="row" id="div_table_templates">

                       <?php foreach ($templates as $template) :     ?>

                           <div class="col-md-12">
                               <div class="card <?= $template['status'] == 1 ? 'card-success' : 'card-secondary ' ?>  collapsed-card">
                                   <div class="card-header">
                                       <h3 class="card-title">
                                           <font style="vertical-align: inherit;">
                                               <font style="vertical-align: inherit;"><?= $template['name']  ?></font>
                                           </font>
                                       </h3>
                                       <div class="card-tools">
                                           <button type="button" class="btn btn-tool delete-template" data-id="<?= Encryption::encode($template['id']) ?>"><i data-id="<?= Encryption::encode($template['id']) ?>" class="fas fa-trash delete-template "></i>
                                           </button>




                                           <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus"></i>
                                           </button>
                                       </div>

                                   </div>

                                   <div class="card-body">
                                       <div class="table-respsonsive" style="width: 100%;">
                                           <section class="content-header">
                                               <div class="row" style="justify-content:right">

                                                   <div class="col-sm-3" style="justify-content:right;text-align:right">
                                                       <button id='' class="btn btn-warning agregar" title="<?= $template['usado'] == 0 ? '' : 'No puedes realizar esta acción, ya  existen solicitudes registradas con esta plantilla';  ?>" <?= ($template['usado'] == 0) ? '' : 'disabled'  ?> <?= ($template['status'] == 1) ? 'disabled' : ''  ?> data-toggle="modal" data-id="<?= Encryption::encode($template['id']) ?>">
                                                           Agregar dia </button>

                                                   </div>
                                           </section>
                                           <table id="table_holidays<?= $template['id'] ?>" class="table table-responsive-lg table-striped  table-condensed">
                                               <thead>
                                                   <tr>
                                                       <th class="text-center" style="width: 20%;">#</th>
                                                       <th class="text-center" style="width: 30%;">Nombre</th>
                                                       <th class="text-center" style="width: 30%;">Fecha</th>
                                                       <th class="text-center" style="width: 20%;">Acciones</th>
                                                   </tr>
                                               </thead>
                                               <tbody>
                                                   <?php
                                                    $dates = ConfiguracionesRHController::format_dates(Utils::getHolidaysByIdTemplate(Encryption::encode($template['id'])));
                                                    $cont = count($dates);
                                                    foreach ($dates as $date) :
                                                    ?>
                                                       <tr>

                                                           <td class="text-center align-middle"><b><?= $cont;  ?></b>
                                                           </td>
                                                           <td class="text-center align-middle">
                                                               <?= $date['name'] ?></td>
                                                           <td class="text-center align-middle">
                                                               <?= $date['day'] . " de " . $date['converted_month'] ?></td>
                                                           <td class="text-center py-0 align-middle">
                                                               <div class="btn-group btn-group-sm ">
                                                                   <button <?= ($template['status'] == 1) ? 'disabled' : ''  ?> title="<?= $template['usado'] == 0 ? '' : 'No puedes realizar esta acción, ya  existen solicitudes registradas con esta plantilla';  ?>" data-id="
                                                               <?= $date['id_encrypted'] ?>" <?= ($template['usado'] == 0) ? '' : 'disabled'  ?> data-id_template=" <?= Encryption::encode($template['id']) ?>" data-day="<?= $date['day'] ?>" data-month="<?= $date['month'] ?>" data-name=" <?= $date['name'] ?> " class=" btn btn-success btn-sm mr-1 editar">
                                                                       <i class="fas fa-edit  "></i>
                                                                   </button>
                                                                   <button <?= ($template['status'] == 1) ? 'disabled' : ''  ?> title="<?= $template['usado'] == 0 ? '' : 'No puedes realizar esta acción, ya  existen solicitudes registradas con esta plantilla';  ?>" class="
                                                               btn btn-danger btn-sm mr-1 borrar" <?= ($template['usado'] == 0) ? '' : 'disabled'  ?> data-id="<?= $date['id_encrypted'] ?>" data-id_template="<?= Encryption::encode($template['id']) ?>" data-name="<?= $date['name'] ?> ">
                                                                       <i class="fas  fa-trash  "></i>
                                                                   </button>

                                                               </div>
                                                           </td>
                                                       </tr>
                                                   <?php
                                                        $cont--;
                                                    endforeach; ?>
                                               </tbody>
                                               <tfoot>
                                                   <tr>
                                                       <th class="text-center">#</th>
                                                       <th class="text-center">Nombre</th>
                                                       <th class="text-center">Fecha</th>
                                                       <th class="text-center">Acciones</th>

                                                   </tr>
                                               </tfoot>
                                           </table>


                                           <section class="content-header">
                                               <div class="row" style="justify-content:center">

                                                   <div class="col-sm-3" style="justify-content:center;text-align:center">
                                                       <button <?= $template['status'] ?> title="<?= $template['status'] != 0 ? 'Esta plantilla ya se encuentra activa' : (count($dates) > 0 ? '' : 'Agrega una fecha para activar esta plantilla');  ?>" <?= ($template['status'] != 1 && count($dates) > 0) ? '' : 'disabled'; ?> id='activar<?= $template['id'] ?>' class="btn btn-success activar" data-toggle="modal" data-id="<?= Encryption::encode($template['id']) ?>">
                                                           Activar plantilla</button>
                                                   </div>
                                               </div>
                                           </section>



                                       </div>

                                       <div>
                                       </div>

                                   </div>

                               </div>
                           </div>

                       <?php endforeach;    ?>






                   </div>

               </div>



               <div>
               </div>
           </div>
       </div>

       <script>
           $(document).ready(function() {



               document.querySelector('#div_table_templates').addEventListener('click', (e) => {
                   e.preventDefault();
                   if (e.target.classList.contains('agregar') || e.target.offsetParent.classList.contains(
                           'agregar')) {

                       let ID;
                       if (e.target.classList.contains('agregar'))
                           ID = e.target.dataset.id;
                       else
                           ID = e.target.offsetParent.dataset.id;

                       document.querySelector('#add-holiday-form').reset();

                       document.querySelector('#add-holiday-form #title').innerHTML =
                           "Agregar nuevo Dia Festivo";
                       document.querySelector('#add-holiday-form #id_template').value = e.target.dataset.id;

                       document.querySelector('#add-holiday-form #id_holiday').value = '';
                       $('#modal-add-holiday').modal({
                           backdrop: 'static',
                           keyboard: false
                       });
                   }
                   if (e.target.classList.contains('activar') || e.target.offsetParent.classList
                       .contains(
                           'activar')) {



                       let ID;
                       if (e.target.classList.contains('activar'))
                           ID = e.target.dataset.id;
                       else
                           ID = e.target.offsetParent.dataset.id;


                       const swalWithBootstrapButtons = Swal.mixin({
                           customClass: {
                               confirmButton: 'btn btn-success',
                               cancelButton: 'btn btn-danger'
                           },
                       })


                       swalWithBootstrapButtons.fire({
                           title: '¿Estás seguro de activar esta plantilla?',
                           text: "Todas las solicitudes de vacaciones que se generen a partir de ahora tomarán estas fechas como referencia para omitir los dias festivos",
                           icon: 'warning',
                           showCancelButton: true,
                           confirmButtonText: 'Activar',
                           cancelButtonText: 'Cancelar'
                       }).then((result) => {
                           console.log(result)
                           if (result.value == true) {
                               modulerh = new ModuleRH();
                               modulerh.activate_template(ID);
                           }
                       })



                   }
                   if (e.target.classList.contains('borrar') || e.target.offsetParent.classList
                       .contains(
                           'borrar')) {


                       var ID;
                       var id_template;
                       var name;
                       if (e.target.classList.contains('borrar')) {
                           ID = e.target.dataset.id;
                           id_template = e.target.dataset.id_template;
                           name = e.target.dataset.name;
                       } else {
                           ID = e.target.offsetParent.dataset.id;
                           id_template = e.target.offsetParent.dataset.id_template;
                           name = e.target.offsetParent.dataset.name;
                       }



                       const swalWithBootstrapButtons = Swal.mixin({
                           customClass: {
                               confirmButton: 'btn btn-danger ',
                               cancelButton: 'btn btn-success'
                           },
                       })



                       swalWithBootstrapButtons.fire({
                           title: '¿Estás seguro de borrar esta fecha ?',
                           text: name,
                           icon: 'warning',
                           showCancelButton: true,
                           confirmButtonText: 'Borrar',
                           cancelButtonText: 'Cancelar'
                       }).then((result) => {
                           console.log(result)
                           if (result.value == true) {
                               modulerh = new ModuleRH();
                               modulerh.delete_holiday(ID, id_template);
                           }
                       })



                   }

                   if (e.target.classList.contains('editar') || e.target.offsetParent.classList.contains(
                           'editar')) {


                       if (e.target.classList.contains('editar')) {
                           ID = e.target.dataset.id;
                           id_template = e.target.dataset.id_template;
                           name = e.target.dataset.name;
                           day = e.target.dataset.day;
                           month = e.target.dataset.month;
                       } else {
                           ID = e.target.offsetParent.dataset.id;
                           id_template = e.target.offsetParent.dataset.id_template;
                           name = e.target.offsetParent.dataset.name;
                           day = e.target.offsetParent.dataset.day;
                           month = e.target.offsetParent.dataset.month;
                       }

                       document.querySelector('#add-holiday-form #title').innerHTML = "Editar " + name;
                       document.querySelector('#add-holiday-form #id_holiday').value = ID;
                       document.querySelector('#add-holiday-form #id_template').value = id_template;

                       document.querySelector('#add-holiday-form #name').value = name;
                       //    document.querySelector('#add-holiday-form #daySelect').value = day;
                       $('#add-holiday-form #daySelect').val(day).trigger('change');
                       updateMonths();
                       console.log(month);
                       $('#add-holiday-form #monthList').val(month).trigger('change');

                       $('#modal-add-holiday').modal({
                           backdrop: 'static',
                           keyboard: false
                       });

                   }


                   if (e.target.classList.contains('delete-template') || e.target.offsetParent.classList
                       .contains(
                           'delete-template')) {

                       let ID;
                       if (e.target.classList.contains('delete-template')) {
                           ID = e.target.dataset.id;
                       } else {
                           ID = e.target.offsetParent.dataset.id;
                       }

                       const swalWithBootstrapButtons = Swal.mixin({
                           customClass: {
                               cancelButton: 'btn btn-success',
                               confirmButton: 'btn btn-danger'
                           },
                       })


                       swalWithBootstrapButtons.fire({
                           title: '¿Estás seguro de eliminar esta plantilla?',
                           text: "Las solicitudes de vacaciones generadas con los datos de esta plantilla seguirán estando a salvo.",
                           icon: 'warning',
                           showCancelButton: true,
                           confirmButtonText: 'Eliminar',
                           cancelButtonText: 'Cancelar'
                       }).then((result) => {
                           console.log(result)
                           if (result.value == true) {
                               modulerh = new ModuleRH();
                               modulerh.delete_template(ID);
                           }
                       })

                   }


               })


               document.querySelector('#add_template').addEventListener('click', e => {
                   document.getElementById("add-template-form").reset();
                   $('#modal-add-template').modal({
                       backdrop: 'static',
                       keyboard: false
                   });
               })














           });
       </script>